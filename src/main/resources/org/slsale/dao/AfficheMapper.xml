<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.slsale.dao.AfficheMapper">
    <select id="getAfficheList" parameterType="affiche" resultType="affiche">
        SELECT *
        FROM affiche
        order by publishTime DESC
        <if test="pageSize!=null">
            limit
            <if test="startNum!=null">#{startNum},</if>
            #{pageSize}
        </if>
    </select>
    <select id="count" parameterType="affiche" resultType="int">
        SELECT count(1)
        FROM affiche
    </select>
    <insert id="addAffiche" parameterType="affiche">
        INSERT INTO affiche (code, title, content, publisher, publishTime,
                             startTime, endTime)
        VALUES
            (#{code}, #{title}, #{content}, #{publisher}, #{publishTime},
             #{startTime}, #{endTime})
    </insert>
    <delete id="delAfficheById" parameterType="affiche">
        DELETE FROM affiche
        WHERE id = #{id};
    </delete>
    <select id="checkCode" parameterType="affiche" resultType="int">
        SELECT count(1)
        FROM affiche
        WHERE code = #{code};
    </select>
    <select id="checkTitle" parameterType="affiche" resultType="int">
        SELECT count(1)
        FROM affiche
        WHERE title = #{title};
    </select>
    <select id="checkCodeAndTitle" parameterType="affiche" resultType="int">
        SELECT count(1)
        FROM affiche
        WHERE code = #{code} OR title = #{title};
    </select>
</mapper>