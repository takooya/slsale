<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.slsale.dao.UserMapper">
    <select id="getLoginUser" parameterType="user" resultType="user">
        SELECT *
        FROM au_user
        WHERE loginCode = #{loginCode} AND password = #{password}
    </select>
    <select id="loginCodeIsExist" parameterType="user" resultType="int">
        SELECT count(1)
        FROM au_user
        <trim prefix="WHERE" prefixOverrides="and|or">
            <if test="loginCode!=null">
                and loginCode = #{loginCode}
            </if>
        </trim>
    </select>
    <update id="modifyUser" parameterType="user">
        UPDATE au_user
        <set>
            <if test="loginCode!=null">loginCode=#{loginCode},</if>
            <if test="password!=null">password=#{password},</if>
            <if test="password2!=null">password2=#{password2},</if>
            <if test="userName!=null">userName=#{userName},</if>
            <if test="sex!=null">sex=#{sex},</if>
            <if test="birthday!=null">birthday=#{birthday},</if>
            <if test="cardType!=null">cardType=#{cardType},</if>
            <if test="cardTypeName!=null">cardTypeName=#{cardTypeName},</if>
            <if test="idCard!=null">idCard=#{idCard},</if>
            <if test="country!=null">country=#{country},</if>
            <if test="mobile!=null">mobile=#{mobile},</if>
            <if test="email!=null">email=#{email},</if>
            <if test="userAddress!=null">userAddress=#{userAddress},</if>
            <if test="postCode!=null">postCode=#{postCode},</if>
            <if test="createTime!=null">createTime=#{createTime},</if>
            <if test="referId!=null">referId=#{referId},</if>
            <if test="referCode!=null">referCode=#{referCode},</if>
            <if test="roleId!=null">roleId=#{roleId},</if>
            <if test="roleName!=null">roleName=#{roleName},</if>
            <if test="userType!=null">userType=#{userType},</if>
            <if test="userTypeName!=null">userTypeName=#{userTypeName},</if>
            <if test="isStart!=null">isStart=#{isStart},</if>
            <if test="lastUpdateTime!=null">lastUpdateTime=#{lastUpdateTime},</if>
            <if test="lastLoginTime!=null">lastLoginTime=#{lastLoginTime},</if>
            <if test="bankAccount!=null">bankAccount=#{bankAccount},</if>
            <if test="bankName!=null">bankName=#{bankName},</if>
            <if test="accountHolder!=null">accountHolder=#{accountHolder},</if>
            <if test="idCardPicPath!=null">idCardPicPath=#{idCardPicPath},</if>
            <if test="bankPicPath!=null">bankPicPath=#{bankPicPath},</if>
        </set>
        WHERE id=#{id}
    </update>
    <insert id="addUser" parameterType="user">
        INSERT INTO au_user (loginCode, password, password2, userName) VALUES (
            #{loginCode}, #{password}, #{password2}, #{userName}
        )
    </insert>
</mapper>